<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>UCN Calculator</title>
    <link rel="icon" href="http://www.caltech.edu/favicon.ico" type="image/icon">
    <link rel="stylesheet" href="http://www.caltech.edu/aux/main.css" type="text/css">
    <meta name="keywords" content="ultra cold neutrons, ultracold neutrons, UCN research, science, engineering, technology">

    <script language='JavaScript' src='http://code.jquery.com/jquery-1.6.4.min.js'></script>
    <script language='JavaScript' src='http://www.caltech.edu/aux/dynamic-images.js'></script>
    <script language='JavaScript' src='http://www.caltech.edu/aux/image-functions.js'></script>
    <script language='JavaScript' src='http://www.its.caltech.edu/~kevinh/navbar.js'></script>

    <script language='JavaScript' src='isotopes.js'></script>
    <script language='JavaScript' src='units.js'></script>

    <script type="text/javascript">
    /*
    var Fermi_potential_elements = new Array("Beryllium", "BeO", "Nickel", "Diamond", "DLC", 
                                             "Graphite", "Iron", "Copper", "Aluminum");
    var Fermi_potentials = new Array(252, 261, 252, 304, 354, 180, 210, 168, 54);
    */

    var isotope_density_change = false;
    var compound_density_change = false;

    $(function() {
        make_select(".isotope-select", isotopes);
        make_select(".unit-select", unit);
    });

    function make_select(selector, list)
    {
        for (var key in list)
            $(selector).append("<option> " + key + " </option>");
    }

    function set_energy_value(selector, energy, key)
    {
        to_value = Math.pow(energy / unit[key].coef, 1/unit[key].exp);
        $(selector).html(to_value.toPrecision(4));

    }

    function compute_ucn_unit()
    {
        var from_index = $("#from-unit-select").val();
        $("#from-unit-words").html(unit[from_index].words);

        var to_index = $("#to-unit-select").val();
        $("#to-unit-words").html(unit[to_index].words);

        var from_value = $("#from-unit-value").val();

        energy_neV = unit[from_index].coef * Math.pow(from_value, unit[from_index].exp);
        //to_value = Math.pow(energy_neV / unit[to_index].coef, 1/unit[to_index].exp);
        //$("#to-unit-value").html(to_value.toPrecision(4));
        set_energy_value("#to-unit-value", energy_neV, to_index).html(to_value.toPrecision(4));
    }

    function compute_fermi_potential()
    {
        var isotope = $("#isotope-select").val();
        var element = isotope.replace(/[0-9]/g, "");

        var to_key = $("#to-fermi-select").val();
        $("#to-fermi-words").html(unit[to_key].words);
        var cohb = isotopes[isotope].cohb;
        var mass = isotopes[isotope].mass;
        if ( isotope_density_change )
            var density = $("#isotope-density").val();
        else
            var density = isotopes[element].density * mass / isotopes[element].mass;

        var energy_neV = 156.811 * density * cohb / mass;
        

        if (isotope == element)
            $("#isotope-label").html("natural element");
        else
            $("#isotope-label").html("pure isotope");

        $("#isotope-density").val(density);
        isotope_density_change = false;

        to_value = Math.pow(energy_neV / unit[to_key].coef, 1/unit[to_key].exp);
        $("#to-fermi-value").html(to_value.toPrecision(4));
    }
    </script>

</head>

<body bgcolor="white" onload="resetSearch()";>
    <!-- header -->	
    <script language='JavaScript1.2' src='http://www.caltech.edu/aux/header.js'></script>

    <!-- content -->

    <h1>UCN Units Calculator</h1>
    <hr>
    <p>
    <b>Instructions</b>
    <ol>
        <li> Enter a numeric value or simple expression.</li>
        <li> Select UCN units from the dropdown lists. </li>
        <li> Click the "Calculate" button. </li>
    </ol>
    <br />

    <p>
        A UCN that <span id="from-unit-words">has energy</span>
        <input id="from-unit-value" type="text" value="1" size="8" maxlength="12">
        <select class="unit-select" id="from-unit-select" onChange="compute_ucn_unit()"> </select>
        <span id="to-unit-words">has energy</span>
        <span id="to-unit-value">1</span>
        <select class="unit-select" id="to-unit-select" onChange="compute_ucn_unit()"> </select>
        <input type="button" value="Calculate" onClick="compute_ucn_unit()">
    </p>

    <br />

    <h1>Single Isotope Fermi Potential Calculator</h1>
    <hr>

    <p id="fermi-potential">
        The <span id="isotope-label">element</span> 
        <select id="isotope-select" class="isotope-select" onChange="compute_fermi_potential()"> </select>
        that has a density of 
        <input id="isotope-density" type="text" value="1" size="8" maxlength="12" onChange="isotope_density_change=true">
        <span id="to-fermi-words">has energy</span>
        <span id="to-fermi-value">...</span>
        <select id="to-fermi-select" class="unit-select" onChange="compute_fermi_potential()"> </select>
        <input type="button" value="Calculate" onClick="compute_fermi_potential()">
    </p>

    <br />

    <h1>Fermi Potential of Compounds Calculator</h1>
    <hr>

    <p id="advanced-fermi-potential">
        The compound 
        <select id="compound-select-1" class="isotope-select" onChange="compute_compound_fermi_potential()"> </select>
        <input id="molar-fraction-1" type="text" value="1" size="2" maxlength="2" onChange="compute_compound_fermi_potential()">
        <select id="compound-select-2" class="isotope-select" onChange="compute_compound_fermi_potential()"> </select>
        <input id="molar-fraction-2" type="text" value="1" size="2" maxlength="2" onChange="compute_compound_fermi_potential()">
        that has a density of 
        <input id="compound-density" type="text" value="1" size="8" maxlength="12" onChange="compound_density_change=true">
        <span id="to-compound-words">has energy</span>
        <span id="to-compound-value">...</span>
        <select id="to-compound-select" class="unit-select" onChange="compute_compound_fermi_potential()"> </select>
        <input type="button" value="Calculate" onClick="compute_compound_fermi_potential()">
    </p>
    <!-- footer -->	
    <hr/>

    <p width="100%">
        <span align="left"> Last updated Oct 6, 2011</span>
        <span align="right"> &copy; 2011 Kevin Hickerson, Caltech </span>
    </p>

    <br/>
    <br/>
    <br/>

    <script language='JavaScript1.2' src='http://www.caltech.edu/aux/footer.js'></script> 

    <script>
    </script>

</body>

</html>

