<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<title>UCN Calculator</title>
<link rel="icon" href="http://www.caltech.edu/favicon.ico" type="image/icon">
<link rel="stylesheet" href="http://www.caltech.edu/aux/main.css" type="text/css">
<meta name="keywords" content="ultra cold neutrons, ultracold neutrons, UCN research, science, engineering, technology">

<script language='JavaScript' src='http://code.jquery.com/jquery-1.6.4.min.js'></script>
<script language='JavaScript' src='http://www.caltech.edu/aux/dynamic-images.js'></script>
<script language='JavaScript' src='http://www.caltech.edu/aux/image-functions.js'></script>
<script language='JavaScript' src='http://www.its.caltech.edu/~kevinh/navbar.js'></script>
<script language='JavaScript' src='isotopes.js'></script>
<script language='JavaScript' src='units.js'></script>

<script type="text/javascript">

// unit per neV: neV, Tesla, Gauss, meters, cm, Kelvin, mK
// unit per m/s: m/s, cm/s, seconds
/*
var unit = {
    "neV" : {
        words: "has energy", 
        exp: 1, 
        coef: 1
    },
    "Tesla" : {
        words: "is repelled by a field of",
        exp: 1, 
        coef: 60.3077
    },
    "Gauss" : {
        words:  "is repelled by a field of",
        exp: 1, 
        coef: 0.00603077
    },
    "meters" : {
        words:  "falls from",
        exp: 1, 
        coef: 102.519
    },
    "cm" : {
        words:  "falls from",
        exp: 1, 
        coef: 1.02519
    },
    "Kelvin" : {
        words: "has temperature",
        exp: 1, 
        coef: 86173.4
    },
    "mK" : {
        words: "has temperature",
        exp: 1, 
        coef: 86.1734
    },
    "m/s" : {
        words: "is moving at",
        exp: 2, 
        coef: 5.2270385
    },
    "cm/s" : {
        words: "is moving at",
        exp: 2, 
        coef: 0.00052270385
    },
    "seconds": {
        words: "reaches apogee in",
        exp: 2, 
        coef: 502.686
    }
};
*/

var Fermi_potential_elements = new Array("Beryllium", "BeO", "Nickel", "Diamond", "DLC", 
                                         "Graphite", "Iron", "Copper", "Aluminum");
var Fermi_potentials = new Array(252, 261, 252, 304, 354, 180, 210, 168, 54);


function make_unit_select()
{
	for (var key in unit)
		document.write( "<option> " + key );
}

function make_fermi_select()
{
    /*
	var i = 0;
	for (i = 0; i < Fermi_potential_elements.length; i++)
		document.write( "<option> " + Fermi_potential_elements[i] );
        */
	for (var key in isotopes)
		document.write( "<option> " + key );
}

function convert_ucn_unit()
{
	var from_index = $("#from-unit-select").val();
	$("#from-unit-words").html(unit[from_index].words);

	var to_index = $("#to-unit-select").val();
    $("#to-unit-words").html(unit[to_index].words);

	var from_value = $("#from-unit-value").val();
	if(isNaN(from_value))
		$("#to-unit-value").html("?"); // TODO make some error message
	else
	{
		energy_neV = unit[from_index].coef * Math.pow(from_value, unit[from_index].exp);
		to_value = Math.pow(energy_neV / unit[to_index].coef, 1/unit[to_index].exp);
	    $("#to-unit-value").html(to_value.toPrecision(6));
    }
}

function convert_fermi_potential()
{
	var from_key = $("#from-fermi-select").val();
	$("#to-fermi-value").html(from_key);

	var to_key = $("#to-fermi-select").val();
	$("#to-fermi-words").html(unit[to_key].words);
	//energy_neV = Fermi_potentials[from_index];
    //var energy_neV = 0; //isotopes[from_key].cohxs;
    

/*
	if(to_index < 7)
		to_value = energy_neV / energy_factors[to_index];
	else
		to_value = Math.sqrt( energy_neV / velocity_factors[to_index-7] );
*/

	//to_value = Math.pow(energy_neV / unit[to_key].coef, 1/unit[to_key].exp);
	//$("#to-fermi-value").html(to_value.toPrecision(4));
	//$("#to-fermi-value").html(energy_neV);
}
</script>

</head>

<body bgcolor="white" onload="resetSearch()";>
<!-- header -->	
<script language='JavaScript1.2' src='http://www.caltech.edu/aux/header.js'></script>

<!-- content -->

<h1>UCN Units Calculator</h1>
<hr>
<p>
<b>Instructions</b>
<ol>
    <li> Enter a numeric value or simple expression.</li>
    <li> Select UCN units from the dropdown lists. </li>
    <li> Click the "Calculate" button. </li>
</ol>
<br />
<p>
<!--<form id="unit-calc">-->
<table>
    <tr>
        <td>A UCN that </td>
        <td> <div id="from-unit-words">has energy</div> </td>
        <td> <input id="from-unit-value" type="text" value="1" size="8" maxlength="12"> </td>
        <td>
            <select id="from-unit-select" onChange="convert_ucn_unit()">
                <script> make_unit_select(); </script>
            </select>
        </td>
        <td> <div id="to-unit-words">has energy</div> </td>
        <td> <div id="to-unit-value">1</div> </td>
        <td>
            <select id="to-unit-select" onChange="convert_ucn_unit()">
                <script> make_unit_select(); </script>
            </select>
        </td>
        <td> <input type="button" value="Calculate" onClick="convert_ucn_unit()"> </td>
    </tr>
</table>
<!--</form>-->

<script>
    /*
    $("select").change(function () {
        var str = "";
        $("select option:selected").each(function () {
            str += $(this).text() + " ";
        });
        $("div").text(str);
    })
    .trigger('change');
    */
</script>

<br>
<br>
<h1>Fermi Potential Calculation</h1>
<hr>

<p><form name="fermi-calc">
<table>
    <tr>
        <td>The Fermi potential of </td>
        <td>
            <select name="from-fermi-select" onChange="convert_fermi_potential()";>
                <script> make_fermi_select(); </script>
            </select>
        </td>
    <td> can trap a UCN that </td>
        <td><div id="to-fermi-words">has energy</div></td>
        <td><div id="to-fermi-value">252</div></td>
        <td>
            <select id="to-fermi-select" onChange="convert_fermi_potential()";>
                <script> make_unit_select(); </script>
            </select>
        </td>
        <td> <input type="button" value="Calculate" onClick="convert_fermi_potential()";> </td>
    </tr>
</table>
</form>

<!-- footer -->	
<hr/>
<p align="right">
<table border=0 width=100%>
<tr>
<td align="left">
Last updated June 26, 2008
</td>
<td align="right">
&copy; 2008 Kevin Hickerson
</td>
</tr>
</table>
</p>
<br/>
<br/>
<br/>

<script language='JavaScript1.2' src='http://www.caltech.edu/aux/footer.js'></script> 

</body>

</html>

